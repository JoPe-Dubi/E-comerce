<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="CompreAqui - E-commerce moderno com os melhores pre√ßos e produtos de qualidade">
    <meta name="keywords" content="e-commerce, loja online, produtos, ofertas, eletr√¥nicos, moda">
    <title>CompreAqui - Sua loja online de confian√ßa</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#007bff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="CompreAqui">
    
    <!-- Icons -->
    <link rel="icon" type="image/png" sizes="32x32" href="img/icon-32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="img/icon-16.png">
    <link rel="apple-touch-icon" href="img/icon-180.png">
    
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <header class="header" role="banner">
        <div class="container">
            <div class="header-top">
                <div class="logo">
                    <h1>Compre<span class="highlight">Aqui</span>
                        <div class="arrow-circle" aria-hidden="true">
                            <i class="fas fa-arrow-right"></i>
                        </div>
                    </h1>
                </div>
                <div class="search-container" role="search">
                    <label for="searchInput" class="sr-only">Buscar produtos</label>
                    <input type="text" id="searchInput" placeholder="O que voc√™ est√° procurando?" class="search-input" aria-label="Campo de busca">
                    <button class="search-btn" onclick="performSearch()" aria-label="Buscar"><i class="fas fa-search" aria-hidden="true"></i></button>
                    <div class="search-suggestions" id="searchSuggestions" role="listbox" aria-label="Sugest√µes de busca"></div>
                </div>
                <div class="header-actions">
                    <button class="user-btn" onclick="openLoginModal()">
                        <i class="fas fa-user"></i> 
                        <span>Entrar</span>
                    </button>
                    <button class="cart-btn" onclick="toggleCart()">
                        <i class="fas fa-shopping-cart"></i> 
                        <span class="cart-count" id="cartCount">0</span>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="navbar" role="navigation" aria-label="Menu principal">
        <div class="container">
            <ul class="nav-menu" role="menubar">
                <li role="none"><a href="#" onclick="filterByCategory('eletronicos')" role="menuitem"><i class="fas fa-laptop" aria-hidden="true"></i> Eletr√¥nicos</a></li>
                <li role="none"><a href="#" onclick="filterByCategory('moda')" role="menuitem"><i class="fas fa-tshirt" aria-hidden="true"></i> Moda</a></li>
                <li role="none"><a href="#" onclick="filterByCategory('casa')" role="menuitem"><i class="fas fa-home" aria-hidden="true"></i> Casa & Decora√ß√£o</a></li>
                <li role="none"><a href="#" onclick="filterByCategory('games')" role="menuitem"><i class="fas fa-gamepad" aria-hidden="true"></i> Games</a></li>
                <li role="none"><a href="#" onclick="filterByCategory('esportes')" role="menuitem"><i class="fas fa-dumbbell" aria-hidden="true"></i> Esportes</a></li>
                <li role="none"><a href="#" onclick="filterByCategory('livros')" role="menuitem"><i class="fas fa-book" aria-hidden="true"></i> Livros</a></li>
            </ul>
        </div>
    </nav>

    <!-- Hero Banner -->
    <section class="hero-banner">
        <div class="banner-content">
            <h2>Ofertas Imperd√≠veis</h2>
            <p>At√© 70% de desconto em produtos selecionados</p>
            <button class="cta-btn" onclick="scrollToOffers()">Ver Ofertas</button>
        </div>
        <div class="categories-carousel">
            <div class="carousel-container">
                <button class="carousel-btn prev" onclick="slideCarousel(-1)">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <div class="carousel-track" id="categoryCarousel">
                    <div class="carousel-slide" data-category="eletronicos">
                        <div class="category-header">
                            <i class="fas fa-laptop"></i>
                            <h4>Eletr√¥nicos</h4>
                        </div>
                        <div class="offer-products">
                            <div class="offer-item">
                                <img src="img/products/iphone-15-pro-1.jpg" alt="iPhone 15 Pro">
                                <div class="offer-info">
                                    <span class="offer-name">iPhone 15 Pro</span>
                                    <span class="offer-price">R$ 6.999</span>
                                </div>
                            </div>
                            <div class="offer-item">
                                <img src="img/products/galaxy-s24-1.jpg" alt="Galaxy S24">
                                <div class="offer-info">
                                    <span class="offer-name">Galaxy S24</span>
                                    <span class="offer-price">R$ 4.299</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="carousel-slide" data-category="moda">
                        <div class="category-header">
                            <i class="fas fa-tshirt"></i>
                            <h4>Moda</h4>
                        </div>
                        <div class="offer-products">
                            <div class="offer-item">
                                <div class="placeholder-img">üëï</div>
                                <div class="offer-info">
                                    <span class="offer-name">Camiseta B√°sica</span>
                                    <span class="offer-price">R$ 89</span>
                                </div>
                            </div>
                            <div class="offer-item">
                                <div class="placeholder-img">üëñ</div>
                                <div class="offer-info">
                                    <span class="offer-name">Cal√ßa Jeans</span>
                                    <span class="offer-price">R$ 149</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="carousel-slide" data-category="casa">
                        <div class="category-header">
                            <i class="fas fa-home"></i>
                            <h4>Casa & Decora√ß√£o</h4>
                        </div>
                        <div class="offer-products">
                            <div class="offer-item">
                                <div class="placeholder-img">üõãÔ∏è</div>
                                <div class="offer-info">
                                    <span class="offer-name">Sof√° 3 Lugares</span>
                                    <span class="offer-price">R$ 899</span>
                                </div>
                            </div>
                            <div class="offer-item">
                                <div class="placeholder-img">ü™¥</div>
                                <div class="offer-info">
                                    <span class="offer-name">Vaso Decorativo</span>
                                    <span class="offer-price">R$ 59</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="carousel-slide" data-category="games">
                        <div class="category-header">
                            <i class="fas fa-gamepad"></i>
                            <h4>Games</h4>
                        </div>
                        <div class="offer-products">
                            <div class="offer-item">
                                <div class="placeholder-img">üéÆ</div>
                                <div class="offer-info">
                                    <span class="offer-name">PlayStation 5</span>
                                    <span class="offer-price">R$ 2.299</span>
                                </div>
                            </div>
                            <div class="offer-item">
                                <div class="placeholder-img">üïπÔ∏è</div>
                                <div class="offer-info">
                                    <span class="offer-name">Controle Gamer</span>
                                    <span class="offer-price">R$ 199</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="carousel-slide" data-category="esportes">
                        <div class="category-header">
                            <i class="fas fa-dumbbell"></i>
                            <h4>Esportes</h4>
                        </div>
                        <div class="offer-products">
                            <div class="offer-item">
                                <div class="placeholder-img">üèãÔ∏è</div>
                                <div class="offer-info">
                                    <span class="offer-name">Kit Halteres</span>
                                    <span class="offer-price">R$ 299</span>
                                </div>
                            </div>
                            <div class="offer-item">
                                <div class="placeholder-img">‚öΩ</div>
                                <div class="offer-info">
                                    <span class="offer-name">Bola de Futebol</span>
                                    <span class="offer-price">R$ 79</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="carousel-slide" data-category="eletrodomesticos">
                        <div class="category-header">
                            <i class="fas fa-blender"></i>
                            <h4>Eletrodom√©sticos</h4>
                        </div>
                        <div class="offer-products">
                            <div class="offer-item">
                                <div class="placeholder-img">‚òï</div>
                                <div class="offer-info">
                                    <span class="offer-name">Cafeteira El√©trica</span>
                                    <span class="offer-price">R$ 549</span>
                                </div>
                            </div>
                            <div class="offer-item">
                                <div class="placeholder-img">üçΩÔ∏è</div>
                                <div class="offer-info">
                                    <span class="offer-name">Jogo de Pratos</span>
                                    <span class="offer-price">R$ 299</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="carousel-slide" data-category="livros">
                        <div class="category-header">
                            <i class="fas fa-book"></i>
                            <h4>Livros</h4>
                        </div>
                        <div class="offer-products">
                            <div class="offer-item">
                                <div class="placeholder-img">üìö</div>
                                <div class="offer-info">
                                    <span class="offer-name">Clean Code</span>
                                    <span class="offer-price">R$ 39</span>
                                </div>
                            </div>
                            <div class="offer-item">
                                <div class="placeholder-img">üìñ</div>
                                <div class="offer-info">
                                    <span class="offer-name">JavaScript Guide</span>
                                    <span class="offer-price">R$ 29</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <button class="carousel-btn next" onclick="slideCarousel(1)">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
            <div class="carousel-indicators" id="carouselIndicators"></div>
        </div>
    </section>



    <!-- Categories Section -->
    <section class="categories-section">
        <div class="container">
            <h2 class="section-title">Categorias em Destaque</h2>
            <div class="categories-grid">
                <button class="category-card" onclick="filterByCategory('eletronicos')" aria-label="Filtrar por categoria Eletr√¥nicos">
                    <div class="category-icon" aria-hidden="true">
                        <i class="fas fa-laptop"></i>
                    </div>
                    <h3>Eletr√¥nicos</h3>
                    <p>Smartphones, notebooks e mais</p>
                </button>
                <button class="category-card" onclick="filterByCategory('moda')" aria-label="Filtrar por categoria Moda">
                    <div class="category-icon" aria-hidden="true">
                        <i class="fas fa-tshirt"></i>
                    </div>
                    <h3>Moda</h3>
                    <p>Roupas e acess√≥rios</p>
                </button>
                <button class="category-card" onclick="filterByCategory('casa')" aria-label="Filtrar por categoria Casa e Decora√ß√£o">
                    <div class="category-icon" aria-hidden="true">
                        <i class="fas fa-home"></i>
                    </div>
                    <h3>Casa & Decora√ß√£o</h3>
                    <p>M√≥veis e decora√ß√£o</p>
                </button>
                <button class="category-card" onclick="filterByCategory('games')" aria-label="Filtrar por categoria Games">
                    <div class="category-icon" aria-hidden="true">
                        <i class="fas fa-gamepad"></i>
                    </div>
                    <h3>Games</h3>
                    <p>Consoles e jogos</p>
                </button>
                <button class="category-card" onclick="filterByCategory('esportes')" aria-label="Filtrar por categoria Esportes">
                    <div class="category-icon" aria-hidden="true">
                        <i class="fas fa-dumbbell"></i>
                    </div>
                    <h3>Esportes</h3>
                    <p>Equipamentos esportivos</p>
                </button>
                <button class="category-card" onclick="filterByCategory('livros')" aria-label="Filtrar por categoria Livros">
                    <div class="category-icon" aria-hidden="true">
                        <i class="fas fa-book"></i>
                    </div>
                    <h3>Livros</h3>
                    <p>Literatura e educa√ß√£o</p>
                </button>
            </div>
        </div>
    </section>



    <!-- Footer -->
    <footer class="footer" role="contentinfo">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>CompreAqui</h3>
                    <p>Sua loja online de confian√ßa com os melhores pre√ßos e produtos de qualidade.</p>
                    <div class="social-links" role="list" aria-label="Redes sociais">
                        <a href="#" aria-label="Seguir no Facebook" role="listitem"><i class="fab fa-facebook" aria-hidden="true"></i></a>
                        <a href="#" aria-label="Seguir no Instagram" role="listitem"><i class="fab fa-instagram" aria-hidden="true"></i></a>
                        <a href="#" aria-label="Seguir no Twitter" role="listitem"><i class="fab fa-twitter" aria-hidden="true"></i></a>
                        <a href="#" aria-label="Seguir no YouTube" role="listitem"><i class="fab fa-youtube" aria-hidden="true"></i></a>
                    </div>
                </div>
                <div class="footer-section">
                    <h4>Atendimento</h4>
                    <ul>
                        <li><a href="pages/faq.html">Central de Ajuda</a></li>
                        <li><a href="pages/contact.html">Fale Conosco</a></li>
                        <li><a href="pages/returns.html">Trocas e Devolu√ß√µes</a></li>
                        <li><a href="pages/tracking.html">Rastreamento</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Sobre</h4>
                    <ul>
                        <li><a href="pages/about.html">Quem Somos</a></li>
                        <li><a href="pages/careers.html">Trabalhe Conosco</a></li>
                        <li><a href="pages/privacy.html">Pol√≠tica de Privacidade</a></li>
                        <li><a href="pages/terms.html">Termos de Uso</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Formas de Pagamento</h4>
                    <div class="payment-methods">
                        <i class="fab fa-cc-visa" title="Visa"></i>
                        <i class="fab fa-cc-mastercard" title="Mastercard"></i>
                        <i class="fab fa-pix" title="PIX"></i>
                        <i class="fas fa-barcode" title="Boleto"></i>
                        <i class="fab fa-paypal" title="PayPal"></i>
                    </div>
                    <div class="security-badges">
                        <img src="img/ssl-badge.svg" alt="SSL Seguro" loading="lazy">
                        <img src="img/security-badge.svg" alt="Site Seguro" loading="lazy">
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 CompreAqui. Todos os direitos reservados.</p>
                <p>CNPJ: 00.000.000/0001-00 | Endere√ßo: Rua do Com√©rcio, 123 - S√£o Paulo, SP</p>
            </div>
        </div>
    </footer>

    <!-- Cart Sidebar -->
    <div id="cartSidebar" class="cart-sidebar">
        <div class="cart-header">
            <h3>Meu Carrinho</h3>
            <button class="close-cart" onclick="toggleCart()">&times;</button>
        </div>
        <div class="cart-items" id="cartItems">
            <div class="empty-cart">
                <i class="fas fa-shopping-cart"></i>
                <p>Seu carrinho est√° vazio</p>
                <button onclick="toggleCart()">Continuar Comprando</button>
            </div>
        </div>
        <div class="cart-footer" id="cartFooter" style="display: none;">
            <div class="cart-total">
                <div class="subtotal">
                    <span>Subtotal: </span>
                    <span id="cartSubtotal">R$ 0,00</span>
                </div>
                <div class="shipping">
                    <span>Frete: </span>
                    <span id="cartShipping">Calcular</span>
                </div>
                <div class="total">
                    <strong>Total: <span id="cartTotal">R$ 0,00</span></strong>
                </div>
            </div>
            <button class="checkout-btn" onclick="goToCheckout()">Finalizar Compra</button>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeLoginModal()">&times;</span>
            <div class="modal-header">
                <h2 id="modalTitle">Entrar</h2>
                <p id="modalSubtitle">Acesse sua conta</p>
            </div>
            <form id="authForm">
                <div class="form-group" id="nameGroup" style="display: none;">
                    <input type="text" id="name" placeholder="Nome completo">
                </div>
                <div class="form-group">
                    <input type="email" id="email" placeholder="admin@exemplo.com" required>
                </div>
                <div class="form-group password-group">
                    <input type="password" id="password" placeholder="Senha" required>
                    <button type="button" class="password-toggle" onclick="togglePasswordVisibility('password')">
                        <i class="fas fa-eye" id="password-eye"></i>
                    </button>
                </div>
                <div class="form-group password-group" id="confirmPasswordGroup" style="display: none;">
                    <input type="password" id="confirmPassword" placeholder="Confirmar senha">
                    <button type="button" class="password-toggle" onclick="togglePasswordVisibility('confirmPassword')">
                        <i class="fas fa-eye" id="confirmPassword-eye"></i>
                    </button>
                </div>
                <button type="submit" id="authSubmitBtn" aria-label="Entrar na conta">Entrar</button>
            </form>
            <div class="social-login">
                <p>Ou entre com:</p>
                <div class="social-buttons">
                    <button class="social-btn google" onclick="loginWithGoogle()">
                        <i class="fab fa-google"></i> Google
                    </button>
                    <button class="social-btn facebook" onclick="loginWithFacebook()">
                        <i class="fab fa-facebook"></i> Facebook
                    </button>
                </div>
            </div>
            <div class="modal-footer">
                <p id="switchAuthMode">
                    N√£o tem conta? <a href="#" onclick="switchToRegister()">Cadastre-se</a>
                </p>
                <p><a href="#" onclick="showForgotPassword()">Esqueci minha senha</a></p>
            </div>
        </div>
    </div>

    <!-- Notification Toast -->
    <div id="notification" class="notification">
        <div class="notification-content">
            <i class="notification-icon"></i>
            <span class="notification-message"></span>
        </div>
    </div>

    <!-- Loading Spinner -->
    <div id="loadingSpinner" class="loading-spinner">
        <div class="spinner"></div>
    </div>

    <!-- Scripts -->
        <script src="js/security.js?v=1"></script>
        <script src="js/validation.js?v=1"></script>
        <script src="js/utils.js?v=1"></script>
        <script src="js/database.js?v=3"></script>
        <script src="js/main.js?v=3"></script>
        <script src="js/cart.js?v=3"></script>
        <script src="js/auth.js?v=3"></script>
        <script src="js/products.js?v=3"></script>
        <script src="js/search.js?v=3"></script>

    <!-- Service Worker Registration -->
    <script>
        // Registrar Service Worker para PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', async () => {
                try {
                    const registration = await navigator.serviceWorker.register('/sw.js');
                    console.log('‚úÖ Service Worker registrado:', registration.scope);
                    
                    // Verificar atualiza√ß√µes
                    registration.addEventListener('updatefound', () => {
                        const newWorker = registration.installing;
                        newWorker.addEventListener('statechange', () => {
                            if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                // Nova vers√£o dispon√≠vel
                                Utils.showNotification('Nova vers√£o dispon√≠vel! Recarregue a p√°gina.', 'info');
                            }
                        });
                    });
                    
                    // Escutar mensagens do Service Worker
                    navigator.serviceWorker.addEventListener('message', (event) => {
                        if (event.data.type === 'SYNC_COMPLETE') {
                            Utils.showNotification(`${event.data.data.synced} itens sincronizados!`, 'success');
                        }
                    });
                    
                } catch (error) {
                    console.error('‚ùå Erro ao registrar Service Worker:', error);
                }
            });
        }

        // Configurar lazy loading e preload inteligente
        document.addEventListener('DOMContentLoaded', () => {
            if (typeof Utils !== 'undefined') {
                Utils.setupLazyLoading();
                Utils.setupIntelligentPreload();
            }
        });

        // Detectar instala√ß√£o PWA
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            
            // Mostrar bot√£o de instala√ß√£o personalizado
            const installButton = document.createElement('button');
            installButton.textContent = 'üì± Instalar App';
            installButton.className = 'install-button';
            installButton.onclick = async () => {
                if (deferredPrompt) {
                    deferredPrompt.prompt();
                    const { outcome } = await deferredPrompt.userChoice;
                    console.log(`PWA install prompt: ${outcome}`);
                    deferredPrompt = null;
                    installButton.remove();
                }
            };
            
            document.querySelector('.header-actions').appendChild(installButton);
        });

        // Detectar quando PWA foi instalada
        window.addEventListener('appinstalled', () => {
            Utils.showNotification('App instalado com sucesso! üéâ', 'success');
            deferredPrompt = null;
        });
    </script>
</body>
</html>